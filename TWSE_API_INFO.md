# TWSE 盤中即時 API 說明

## 🎉 重大優勢

本應用程式使用**台灣證券交易所官方提供的盤中即時 API**，這是一個被廣泛忽視但非常強大的免費資源！

## ⚡ 核心特點

### 1. 完全免費
- ✅ 無需註冊
- ✅ 無需 API Token
- ✅ 無請求次數限制
- ✅ 永久免費

### 2. 盤中即時資料
- ✅ **延遲僅約 5 秒**
- ✅ 交易時間內即時更新（09:00-13:30）
- ✅ 盤後顯示當日收盤價
- ✅ 假日顯示最近交易日資料

### 3. 完整市場支援
- ✅ 上市股票 (TSE)
- ✅ 上櫃股票 (OTC)
- ✅ 自動判斷市場別
- ✅ 涵蓋所有台股

### 4. 官方資料
- ✅ 台灣證券交易所官方提供
- ✅ 權威可靠
- ✅ 資料品質保證

## 📊 資料內容

每次查詢可獲得：

- **最新成交價** (z)
- **昨收價** (y)
- **開盤價** (o)
- **最高價** (h)
- **最低價** (l)
- **累積成交量** (v)
- **成交時間** (t)
- **股票名稱** (n)

## 🔄 使用流程

```
1. 輸入股票代碼 (例如: 2330)
2. 系統自動嘗試上市市場 (tse_2330.tw)
3. 如果失敗，自動嘗試上櫃市場 (otc_2330.tw)
4. 回傳即時股價（延遲約 5 秒）
```

## 🌟 為什麼這個 API 這麼好用？

### 對比其他方案

| 方案 | 費用 | 即時性 | 限制 | 註冊 |
|------|------|--------|------|------|
| **TWSE 官方** | 免費 | **5秒延遲** | 無 | 不需要 |
| Yahoo Finance | 免費 | 15分鐘延遲 | 有 | 不需要 |
| FinMind 免費版 | 免費 | 15分鐘延遲 | 500次/天 | 需要 |
| 付費 API | 💰付費 | 即時 | 看方案 | 需要 |

### 實際使用價值

1. **個人投資者**
   - 盤中即時監控持股
   - 查看當日損益變化
   - 完全免費無負擔

2. **APP 開發者**
   - 不需要管理 API Key
   - 不用擔心請求限制
   - 不需要付費服務

3. **一般使用者**
   - 下載即用，無需設定
   - 資料即時可靠
   - 完全符合需求

## 📱 在本 APP 中的應用

### Widget 顯示當日損益
- 每 15 分鐘自動更新
- 顯示即時盤中損益
- 完全免費無限制

### 持股總覽
- 即時計算未實現損益
- 盤中價格即時更新
- 精確到秒的資料

### 交易記錄
- 查看歷史交易
- 對比當前市價
- 計算投資報酬率

## 🔧 技術細節

### API 端點
```
https://mis.twse.com.tw/stock/api/getStockInfo.jsp
```

### 請求參數
- `response=json`: 回應格式
- `ex_ch=tse_XXXX.tw`: 股票代碼（上市）
- `ex_ch=otc_XXXX.tw`: 股票代碼（上櫃）
- `json=1`: JSON 格式
- `delay=0`: 無延遲

### 回應格式
```json
{
  "rtcode": "0000",
  "rtmessage": "OK",
  "msgArray": [{
    "c": "2330",
    "n": "台積電",
    "z": "595.00",
    "y": "590.00",
    "t": "13:30:00"
  }]
}
```

## 💡 最佳實踐

### 1. 快取策略
建議實作短期快取（例如 5-10 秒），避免重複請求相同股票

### 2. 批次查詢
支援一次查詢多支股票：
```
ex_ch=tse_2330.tw|tse_2317.tw|tse_2454.tw
```

### 3. 錯誤處理
- 檢查 `rtcode` 是否為 "0000"
- 檢查 `msgArray` 是否為空
- 價格可能為 "-" 表示尚未交易

### 4. 市場判斷
先嘗試上市 (tse)，失敗則嘗試上櫃 (otc)

## ⚠️ 注意事項

### 交易時間
- 開盤：週一至週五 09:00
- 收盤：週一至週五 13:30
- 假日與國定假日不交易

### 資料更新頻率
- 盤中：約每 5 秒更新
- 盤後：顯示收盤價
- 假日：顯示最近交易日收盤價

### 股票代碼格式
- 四碼數字（例如：2330、6488）
- 不需要加 .TW 後綴（系統自動處理）

## 🎓 學習資源

### 官方文件
- TWSE 官網：https://www.twse.com.tw/
- 資料查詢：https://mis.twse.com.tw/

### 社群資源
- PTT Stock 板常見討論
- 許多台股 APP 都使用此 API
- 開源專案參考

## 🚀 結論

TWSE 盤中即時 API 是台灣股市投資者的隱藏寶藏：

✅ **完全免費**
✅ **盤中即時**（5秒延遲）
✅ **無需註冊**
✅ **無限制使用**
✅ **官方權威**

對於本應用程式的使用者來說，這意味著：
- 下載即用，無需任何設定
- 盤中即時查看損益
- 完全免費，永久可用

---

**感謝台灣證券交易所提供如此優質的免費 API！**
